<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>shaheen gandhi | blog</title>
    <meta name="description" content="programming cocoa and ios" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- fb open graph tags -->
    <meta property="og:title" content="iOS: Scalable, Scrollable Views" />
    <meta property="og:url" content="http://shaheengandhi.com/ios-scalable-scrollable-views" />
    <meta property="og:site_name" content="shaheen gandhi | blog" />
    <meta property="og:type" content="blog" />

    <link rel="alternate" type="application/rss+xml" title="shaheen gandhi | blog" href="http://shaheengandhi.com/feed.xml">
    <link rel="stylesheet" type="text/css" href="/assets/css/app.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400" />
    <script src="/bower_components/modernizr/modernizr.js"></script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47069804-1', 'shaheengandhi.com');
    ga('send', 'pageview');

</script>
</head>
<body>
<div id="fb-root">
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=134486209909433";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script></div>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label class="first">shaheen gandhi | blog</label></li>
          <li><a href="/">Home</a></li>
          <li><a href="/feed.xml">RSS</a></li>
        </ul>

        <hr />

        <ul class="off-canvas-list">
          <li><label class="first">Topics</label></li>
          <li><a href="/tag/tv">#tv (18)</a></li> <li><a href="/tag/video">#video (17)</a></li> <li><a href="/tag/apple">#apple (15)</a></li> <li><a href="/tag/programming">#programming (9)</a></li> <li><a href="/tag/cocoa">#cocoa (7)</a></li> <li><a href="/tag/ios">#ios (7)</a></li> <li><a href="/tag/mobile">#mobile (6)</a></li> <li><a href="/tag/games">#games (5)</a></li> <li><a href="/tag/gadgets">#gadgets (4)</a></li> <li><a href="/tag/personal">#personal (3)</a></li> <li><a href="/tag/film">#film (3)</a></li> <li><a href="/tag/media">#media (2)</a></li> <li><a href="/tag/osx">#osx (1)</a></li> <li><a href="/tag/microsoft">#microsoft (1)</a></li> <li><a href="/tag/creativity">#creativity (1)</a></li> <li><a href="/tag/math">#math (1)</a></li> <li><a href="/tag/tech">#tech (1)</a></li> <li><a href="/tag/hardware">#hardware (1)</a></li>
        </ul>
      </aside>

      <nav class="tab-bar hide-for-medium-up">
        <a class="left-off-canvas-toggle menu-icon show-for-small"><span>Menu</span></a>
      </nav>

      <section role="main">
        <div class="row">
          <div class="medium-8 medium-centered columns">
            <div class="row">
              <div class="large-3 medium-4 medium-uncentered columns hide-for-small sidebar">
                <div class="bio">
                  <a class="profile-picture" href="/">
                    <img src="/assets/images/profile.jpg" alt="shaheen gandhi | blog" />
                  </a>

                  <div class="author">Shaheen Gandhi</div>

                  <div class="description">
                    <p>I am a software engineer working on embedded hardware-software systems.  I built Xbox and Courier operating system internals, mobile infrastructure at Facebook, and now work at Facebook Reality Labs on the future of VR.</p>
                  </div>

                  <ul class="small-block-grid-4 social-accounts">
                    <li><a href="/feed.xml">
                      <span class="fa-stack rss">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                      </span>
                    </a></li>
                    <li><a href="http://twitter.com/visigoth">
                      <span class="fa-stack twitter">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                      </span>
                    </a></li>
                    <li><a href="http://facebook.com/shaheen">
                      <span class="fa-stack facebook">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                      </span>
                    </a></li>
                    <li><a href="http://github.com/visigoth">
                      <span class="fa-stack github">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                      </span>
                    </a></li>
                  </ul>
                </div>

                <!--
                <form id="subscribe_form" action="http://shaheengandhi.us2.list-manage.com/subscribe/post?u=7c5ac886805e86c7228040973&amp;id=cc1838ba6f" method="post" class="validate" target="_blank" novalidate>
                  <div class="row collapse">
                    <div class="small-10 columns">
                      <input class="email" type="email" value="" name="EMAIL" placeholder="subscribe via email" required>
                    </div>
                    <div class="small-2 columns">
                      <input type="submit" value="&#xf0a9" class="fa button postfix">
                    </div>
                  </div>
                </form>
                -->

                <nav id="archive">
                  <ul class="side-nav">
                    <li class="heading">Topics</li>
                    <li><a href="/tag/tv">#tv (18)</a></li> <li><a href="/tag/video">#video (17)</a></li> <li><a href="/tag/apple">#apple (15)</a></li> <li><a href="/tag/programming">#programming (9)</a></li> <li><a href="/tag/cocoa">#cocoa (7)</a></li> <li><a href="/tag/ios">#ios (7)</a></li> <li><a href="/tag/mobile">#mobile (6)</a></li> <li><a href="/tag/games">#games (5)</a></li> <li><a href="/tag/gadgets">#gadgets (4)</a></li> <li><a href="/tag/personal">#personal (3)</a></li> <li><a href="/tag/film">#film (3)</a></li> <li><a href="/tag/media">#media (2)</a></li> <li><a href="/tag/osx">#osx (1)</a></li> <li><a href="/tag/microsoft">#microsoft (1)</a></li> <li><a href="/tag/creativity">#creativity (1)</a></li> <li><a href="/tag/math">#math (1)</a></li> <li><a href="/tag/tech">#tech (1)</a></li> <li><a href="/tag/hardware">#hardware (1)</a></li>
                  </ul>
                </nav>
              </div>
              <div class="large-9 medium-8 medium-uncentered columns">
                <main class="content" role="main">
  <article class="post">
    <header class="post-header">
      <div class="post-title">iOS: Scalable, Scrollable Views</div>
    </header>

    <section class="post-content">
      <p>I've got a Mac project I'm working on that required a scalable viewport into another view. &nbsp;Because the viewport could be a scaled version of the target view, it also needs to be scrollable. &nbsp;This sort of pattern is seen a lot in editing applications and web browsers. &nbsp;Specifically, I was looking to mimic the iPhone Simulator app. &nbsp;It took me about 10 hours of wrangling cocoa to get it to do what I wanted. &nbsp;I tried writing a custom NSClipView among other tactics, but what I found to work in the end was pretty simple.&nbsp; This technique should transfer to iOS readily.<p /> To scale the view you're inspecting, you'll likely use NSView's scaleUnitSquareToSize: selector.&nbsp; This will render the view's contents using Quartz scaling algorithms.&nbsp; However, it will not change the frame/bounds of the view.&nbsp; This is where the crux of the problem lies - the scroll extents of the scroll view would not change.&nbsp; When scaled up, the scroll view would not scroll enough of the view to see all of it.&nbsp; When scaled down, the scroll view would scroll too far and show emptiness on the sides of the document.<p /> To work around this, we will create a new document view that advertises the correct frame to the scroll view.&nbsp; It will host the true document view as a subview, without clipping it and without autoresize enabled.&nbsp; It will monitor the document view's frame and adjust accordingly.&nbsp; It will also need to know the scale of the document view, and the easiest way to handle that is to have this new host view control the scale of the document.&nbsp; Here's all the code you need:<p /> <a href="https://gist.github.com/715903">https://gist.github.com/715903/e11a0afe4245fa697e5660d4fc887eae08275bec</a><p />Once you have this code, you can call setDocumentView: on any scroll view with a HostView.&nbsp; When you need to change the scale, call setScale: (or use the property accessor) on the HostView.&nbsp; The scroll view will adjust its scroll bars accordingly.<p /> Note, however, that the scroll view's frame will not change - the scroll view's size will be the same, but the scroll bars will reflect the correct amount of data that is visible.&nbsp; If you want the scroll view to adjust its size correctly to fit the document, you will need to add some more monitoring to the document's frame size and adjust accordingly outside of the scroll view itself.<p /> ~s</p>

    </section>

       <footer class="post-footer">
      
      <span class="post-meta">
        <a href="#comments"><fb:comments-count href="http://shaheengandhi.com/ios-scalable-scrollable-views"></fb:comments-count> Comments</a> //
        <i class="fa fa-calendar-o"></i><time datetime="25 November 2010">25 November 2010</time> //
        <ul class="post-tags">
          <li><a href="/tag/programming">#programming</a></li> <li><a href="/tag/cocoa">#cocoa</a></li> <li><a href="/tag/ios">#ios</a></li>
        </ul>
      </span>
      <div id="comments" class="fb-comments" data-href="http://shaheengandhi.com/ios-scalable-scrollable-views" data-numposts="5" data-colorscheme="light"></div>
      
    </footer>

  </article>
</main>

              </div>
            </div>
          </div>
        </div>
      </section>
      <a class="exit-off-canvas"></a>
    </div>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="/bower_components/foundation/js/foundation.min.js"></script>
  <script src="/assets/js/app.js"></script>

</body>
</html>
